!function(){window.app=_.extend({},Backbone.Events,{Models:{},Collections:{},Views:{},Routers:{},init:function(){"use strict";return new this.Views.Authenticate},ready:function(){return $("#app").show(),this.repositories=new this.Collections.Repositories,this.notifications=new app.Collections.Notifications,new this.Views.Lists({repositories:this.repositories}),new this.Routers.Notifications({notifications:this.notifications,repositories:this.repositories}),new this.Views.Shortcuts({collection:this.notifications}),Backbone.history.start(),Backbone.history.navigate("all",{trigger:!0})},isDevelopment:function(){return null!=localStorage.dev}}),$(function(){"use strict";return app.init()}),$.ajaxSetup({headers:{Accept:"application/vnd.github.v3.html+json"},cache:!1})}.call(this),this.JST=this.JST||{},this.JST["app/scripts/templates/authenticate.ejs"]=function(obj){obj||(obj={});var __p="";with(_.escape,obj)__p+='<form class="login">\n  <h1>GitHub Notifications</h1>\n  <input type="text" name="token" placeholder="GitHub Token">\n  <button>Sign In</button>\n  <a href="https://github.com/settings/tokens/new" target="_blank">Create New GitHub Token</a></p>\n</form>\n';return __p},this.JST["app/scripts/templates/comment.ejs"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="discussion-meta">\n  <a href="'+(null==(__t=user.html_url)?"":__t)+'" class="discussion-user">\n    <img class="discussion-avatar" src="'+(null==(__t=user.avatar_url)?"":__t)+'">\n    '+__e(user.login)+'\n  </a>\n\n  <time class="js-relative-time" datetime="'+(null==(__t=created_at)?"":__t)+'">'+(null==(__t=created_at)?"":__t)+'</time>\n</div>\n\n<div class="discussion-content">'+(null==(__t=body_html)?"":__t)+"</div>\n";return __p},this.JST["app/scripts/templates/commit.ejs"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="discussion-meta">\n  <a href="'+(null==(__t=author.html_url)?"":__t)+'">\n    <img class="discussion-avatar" src="'+(null==(__t=author.avatar_url)?"":__t)+'">\n    '+__e(author.login)+'\n  </a>\n  committed\n</div>\n\n<div class="discussion-content"><a href="'+(null==(__t=html_url)?"":__t)+'">'+(null==(__t=sha)?"":__t)+"</a></div>\n";return __p},this.JST["app/scripts/templates/issue.ejs"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="discussion-meta">\n  <a href="'+(null==(__t=user.html_url)?"":__t)+'">\n    <img class="discussion-avatar" src="'+(null==(__t=user.avatar_url)?"":__t)+'">\n    '+__e(user.login)+'\n  </a>\n  created this issue\n  <time class="js-relative-time" datetime="'+(null==(__t=created_at)?"":__t)+'">'+(null==(__t=created_at)?"":__t)+'</time>\n</div>\n\n<div class="discussion-content">'+(null==(__t=body_html)?"":__t)+"</div>\n";return __p},this.JST["app/scripts/templates/lists.ejs"]=function(obj){obj||(obj={});var __p="";with(_.escape,obj)__p+='<header>\n  <h1>GitHub Notifications</h1>\n</header>\n<div class="content">\n  <ul class="primary">\n    <li class="list"><a href="#all">All</a></li>\n    <li class="list"><a href="#participating">Participating</a></li>\n    <li class="list"><a href="#starred">Starred</a></li>\n  </ul>\n\n  <ul id="repositories">\n    <span class="title">Repositories</span>\n  </ul>\n</div>\n';return __p},this.JST["app/scripts/templates/notification.ejs"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<a href="#n/'+(null==(__t=id)?"":__t)+'" class="'+(null==(__t=unread?"unread":"read")?"":__t)+'">\n  <span class="octicon octicon-'+(null==(__t=subject.octicon)?"":__t)+'"></span>\n  <span class="title">'+__e(subject.title)+'</span>\n  <span class="repository">'+__e(repository.owner.login)+" / "+__e(repository.name)+'</span>\n  <time class="js-relative-time" datetime="'+(null==(__t=updated_at)?"":__t)+'">'+(null==(__t=updated_at)?"":__t)+"</time>\n</a>\n";return __p},this.JST["app/scripts/templates/notification_details.ejs"]=function(obj){obj||(obj={});var __p="";with(_.escape,obj)__p+='<header>\n</header>\n<div class="subject content">\n  <div class="comments">\n  </div>\n</div>\n';return __p},this.JST["app/scripts/templates/notification_header.ejs"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)__p+='<h1>\n  <a href="'+(null==(__t=subject.html_url)?"":__t)+'">\n    <span class="notification-type-octicon octicon octicon-'+(null==(__t=subject.octicon)?"":__t)+'"></span>\n    '+__e(subject.title)+'\n  </a>\n</h1>\n<nav>\n  <span class="subscription"></span>\n  <button class="star octicon octicon-star',starred&&(__p+=" starred"),__p+='"></button>\n</nav>\n';return __p},this.JST["app/scripts/templates/notifications.ejs"]=function(obj){obj||(obj={});var __p="";with(_.escape,obj)__p+='<header>\n  <nav class="segmented-control">\n    <input id="notification-state-unread" type="radio" name="notifications-state" value="unread" checked>\n    <label for="notification-state-unread">Unread</label>\n\n    <input id="notification-state-all" type="radio" name="notifications-state" value="all">\n    <label for="notification-state-all">All</label>\n  </nav>\n  <nav class="actions">\n    <a id="mark-all-read" class="button octicon octicon-check" href="#" title="Mark all as read"></a>\n  </nav>\n</header>\n<ul class="notification-list content">\n</ul>\n';return __p},this.JST["app/scripts/templates/pull_request.ejs"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="discussion-meta">\n  <a href="'+(null==(__t=user.html_url)?"":__t)+'" class="discussion-user">\n    <img class="discussion-avatar" src="'+(null==(__t=user.avatar_url)?"":__t)+'">\n    '+__e(user.login)+'\n  </a>\n  opened this pull request\n  <time class="js-relative-time" datetime="'+(null==(__t=created_at)?"":__t)+'">'+(null==(__t=created_at)?"":__t)+'</time>\n</div>\n\n<div class="discussion-content">\n  <div class="pull-head">\n    <span class="pull-state">\n        <span class="state-indicator '+(null==(__t=state)?"":__t)+'">'+(null==(__t=state)?"":__t)+'</span>\n    </span>\n\n    <div class="pull-head-meta">\n      <span class="pull-number">\n        <a href="'+(null==(__t=html_url)?"":__t)+'">#'+(null==(__t=number)?"":__t)+'</a>\n      </span>\n    </div>\n\n    <p class="pull-summary nowrap">\n      <a href="'+(null==(__t=user.html_url)?"":__t)+'" class="pull-header-username">'+(null==(__t=user.login)?"":__t)+"</a>\n      wants to merge "+(null==(__t=commits)?"":__t)+' commits into\n      <span class="commit-ref">'+__e(base.ref)+'</span>\n      from\n      <span class="commit-ref">'+__e(head.ref)+"</span>\n    </p>\n\n  </div>\n\n  "+(null==(__t=body_html)?"":__t)+"\n</div>\n";return __p},this.JST["app/scripts/templates/repository.ejs"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<li class="list">\n  <a href="#r/'+(null==(__t=id)?"":__t)+'">\n    <span class="list-name">'+__e(full_name)+'</span>\n    <span class="list-unread-count">'+(null==(__t=unread_count)?"":__t)+"</span>\n  </a>\n</li>\n";return __p},this.JST["app/scripts/templates/shortcuts.ejs"]=function(obj){obj||(obj={});var __t,__p="";with(_.escape,Array.prototype.join,obj){__p+="<h2>Keyboard Shortcuts</h2>\n\n<dl>\n  ";for(var description in shortcuts)__p+="\n    <dt>"+(null==(__t=shortcuts[description].keys.join(" or "))?"":__t)+"</dt>\n    <dd>"+(null==(__t=description)?"":__t)+"</dd>\n  ";__p+="\n</dl>\n"}return __p},this.JST["app/scripts/templates/subscription.ejs"]=function(obj){obj||(obj={});var __p="";with(_.escape,Array.prototype.join,obj)__p+=ignored?'\n  <button class="unmute octicon octicon-unmute" title="Unmute"></button>\n':'\n  <button class="mute octicon octicon-mute" title="Mute"></button>\n',__p+="\n";return __p},function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};app.Models.Notification=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.initialize=function(){return this.url=this.get("url"),this.subject=new app.Models.Subject["for"](this.get("subject")),this.subscription=new app.Models.Subscription({id:this.id,url:this.url+"/subscription"})},d.prototype.toJSON=function(){return _.extend(d.__super__.toJSON.apply(this,arguments),{subject:this.subject.toJSON(),starred:this.isStarred()})},d.prototype.select=function(){return this.collection?this.collection.select(this):void 0},d.prototype.read=function(){return this.subject.get("url")?app.isDevelopment()?void 0:this.save({unread:!1},{patch:!0}):void 0},d.prototype.star=function(){return this.collection.starred.create(this.toJSON()),this.trigger("change")},d.prototype.unstar=function(){var a;return null!=(a=this.collection.starred.get(this.id))&&a.destroy(),this.trigger("change")},d.prototype.toggleStar=function(){return console.log("toggling",this.isStarred(),this.id),this.isStarred()?this.unstar():this.star()},d.prototype.isStarred=function(){return null!=this.collection.starred.get(this.id)},d}(Backbone.Model)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};app.Models.Subject=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d["for"]=function(a){var b;return b=app.Models[a.type]||app.Models.Subject,new b(a)},d.prototype.initialize=function(){return this.url=this.get("url")},d.prototype.toJSON=function(){return _.extend(d.__super__.toJSON.apply(this,arguments),{octicon:this.octicon})},d}(Backbone.Model)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};app.Models.Issue=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.octicon="issue-opened",d}(app.Models.Subject)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};app.Models.PullRequest=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.octicon="git-pull-request",d}(app.Models.Subject)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};app.Models.Commit=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.octicon="git-commit",d}(app.Models.Subject)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};app.Models.Comment=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d}(Backbone.Model)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};app.Models.Repository=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.notifications=function(){return new app.Collections.Notifications([],{url:this.notifications_url()})},d.prototype.notifications_url=function(){return this.get("notifications_url").replace(/\{.*\}/,"")},d.prototype.unread_count=function(){var a;return a=this.get("unread_count"),a>999&&(a="âˆž"),a},d.prototype.toJSON=function(){return _.extend(d.__super__.toJSON.apply(this,arguments),{unread_count:this.unread_count()})},d}(Backbone.Model)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};app.Models.Subscription=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.defaults={ignored:!1},d.prototype.initialize=function(){return this.url=this.get("url")},d.prototype.mute=function(){return this.save({ignored:!0})},d.prototype.unmute=function(){return this.save({ignored:!1})},d.prototype.toggle=function(){return this.get("ignored")?this.unmute():this.mute()},d}(Backbone.Model)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};app.Collections.Notifications=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.model=app.Models.Notification,d.prototype.url="https://api.github.com/notifications",d.prototype.initialize=function(){return this.on("reset",function(){return this.select(void 0)}),this.starred=new app.Collections.Starred,this.starred.fetch()},d.prototype.select=function(a){var b;return b=this.selected,this.selected=a,b&&b.trigger("unselected"),a&&a.trigger("selected"),this.trigger("selected",a,b)},d.prototype.next=function(){var a;return a=this.indexOf(this.selected),a>=0?this.at(a+1):void 0},d.prototype.prev=function(){var a;return a=this.indexOf(this.selected),this.at(a-1)},d.prototype.read=function(a){return null==a&&(a={}),a.data="{}",app.isDevelopment()||this.sync("update",this,a),this.each(function(a){return a.set("unread",!1)})},d}(Backbone.Collection)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};app.Collections.Starred=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.localStorage=new Backbone.LocalStorage("starred"),d}(Backbone.Collection)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};app.Collections.Comments=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.model=app.Models.Comment,d}(Backbone.Collection)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};app.Collections.Repositories=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.model=app.Models.Repository,d.prototype.url="https://api.github.com/notifications/repositories",d.prototype.parse=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],b.repository.unread_count=b.unread_count,e.push(b.repository);return e},d}(Backbone.Collection)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};app.Views.Authenticate=function(c){function e(){return this.error=b(this.error,this),this.success=b(this.success,this),this.submit=b(this.submit,this),this.initialize=b(this.initialize,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.scope="repo,user",e.prototype.el="#authenticate",e.prototype.template=JST["app/scripts/templates/authenticate.ejs"],e.prototype.events={"submit form":"submit"},e.prototype.initialize=function(){return(this.token=localStorage.token)?this.done():this.render()},e.prototype.render=function(){return this.$el.html(this.template()),this},e.prototype.submit=function(a){return a.preventDefault(),this.token=this.$("input[name=token]").val(),$.ajax({url:"https://api.github.com/user",headers:{Authorization:"token "+this.token},success:this.success,error:this.error})},e.prototype.done=function(){var a=this;return jQuery.ajaxPrefilter(function(b,c,d){return d.setRequestHeader("Authorization","token "+a.token)}),app.ready(),this.remove()},e.prototype.success=function(){return localStorage.token=this.token,this.done()},e.prototype.error=function(){return alert("Nope!")},e}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};app.Views.Notifications=function(c){function e(){return this.initialize=b(this.initialize,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.el="#threads",e.prototype.template=JST["app/scripts/templates/notifications.ejs"],e.prototype.events={"change input[name=notifications-state]":function(){return this.load(this.options)},"click #mark-all-read":"read"},e.prototype.initialize=function(){return this.options={},this.listenTo(this.collection,"add",this.add),this.listenTo(this.collection,"reset",this.addAll)},e.prototype.load=function(a){var b;return this.options=null!=a?a:{},(b=this.options).data||(b.data={}),this.options.data.all=this.shouldShowAll(),this.collection.fetch(_.extend({reset:!0},this.options))},e.prototype.shouldShowAll=function(){return"all"===this.$("input[name=notifications-state]:checked").val()},e.prototype.render=function(){return this.$el.html(this.template()),app.trigger("render",this),this},e.prototype.add=function(a){var b;return b=new app.Views.Notification({model:a}),this.$(".notification-list").append(b.render().el)},e.prototype.addAll=function(){return this.$(".notification-list").empty(),this.collection.each(this.add,this)},e.prototype.read=function(a){return a.preventDefault(),this.collection.read(this.options)},e}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};app.Views.Notification=function(c){function e(){return this.scrollIntoView=b(this.scrollIntoView,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.tagName="li",e.prototype.className="notification",e.prototype.template=JST["app/scripts/templates/notification.ejs"],e.prototype.initialize=function(){return this.listenTo(this.model,"unselected",this.unselect),this.listenTo(this.model,"selected",this.select),this.listenTo(this.model,"change",this.render)},e.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),app.trigger("render",this),this},e.prototype.unselect=function(){return this.$el.removeClass("selected")},e.prototype.select=function(){return this.$el.addClass("selected"),this.scrollIntoView()},e.prototype.scrollIntoView=function(){var a,b,c,d;return c=this.$el.closest("#threads"),b=(d=this.$el.offset().top)<0?d:(a=d+this.$el.height()-c.height())>0?a:void 0,b?c.scrollTop(c.scrollTop()+b):void 0},e}(Backbone.View)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};app.Views.Lists=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.el="#lists",d.prototype.template=JST["app/scripts/templates/lists.ejs"],d.prototype.initialize=function(a){return this.render(),this.repositories=new app.Views.Repositories({collection:a.repositories})},d.prototype.render=function(){return this.$el.html(this.template()),app.trigger("render",this),this},d}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};app.Views.NotificationDetailsView=function(c){function e(){return this.scroll=b(this.scroll,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.el="#details",e.prototype.template=JST["app/scripts/templates/notification_details.ejs"],e.prototype.keyboardEvents={m:function(){return this.model.subscription.toggle()},s:function(){return this.model.toggleStar()},o:function(){return window.open(this.model.subject.get("html_url"),"_blank")}},e.prototype.events={"click a":"clickLink"},e.prototype.initialize=function(){return this.render(),this.listenTo(this.model.subject,"change",this.renderSubject),this.model.subject.fetch(),this.comments=new app.Collections.Comments,this.listenTo(this.comments,"add",this.addComment),this.listenTo(this.comments,"reset",this.addAllComments),this.model.read()},e.prototype.render=function(){return this.model.select(),this.$el.html(this.template(this.model.toJSON())),app.trigger("render",this),new app.Views.NotificationHeader({model:this.model,el:this.$("header")}),this},e.prototype.renderSubject=function(a){var b,c;return c=new(app.Views[a.get("type")])({model:a,notification:this.model}),this.$(".comments").empty().append(c.render().el),(b=a.get("comments_url"))?this.comments.fetch({url:b}).then(this.scroll):void 0},e.prototype.addComment=function(a){var b;return b=new app.Views.Comment({model:a,notification:this.model}),this.$(".comments").append(b.render().el)},e.prototype.addAllComments=function(){return this.collection.each(this.add,this)},e.prototype.scroll=function(){var a;return(a=this.$(".discussion-comment.expanded:first").position())?this.$(".subject").prop("scrollTop",a.top):void 0},e.prototype.clickLink=function(a){var b;return b=a.target.getAttribute("href"),b&&b.hostname!==window.location.hostname?a.target.target="_blank":void 0},e}(Backbone.View)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};app.Views.NotificationHeader=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["app/scripts/templates/notification_header.ejs"],d.prototype.events={"click .star":function(){return this.model.toggleStar()}},d.prototype.initialize=function(){return this.render(),this.listenTo(this.model.subject,"change",this.render),this.listenTo(this.model,"change",this.render)},d.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),new app.Views.Subscription({model:this.model.subscription,el:this.$(".subscription")}),this},d}(Backbone.View)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};app.Views.Comment=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["app/scripts/templates/comment.ejs"],d.prototype.className="discussion-comment",d.prototype.events={"click .discussion-meta":"toggle"},d.prototype.initialize=function(a){return this.notification=a.notification},d.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.addClass(this.unread()?"expanded":"collapsed"),app.trigger("render",this),this},d.prototype.unread=function(){var a;return a=this.notification.get("last_read_at"),!a||moment(a)<moment(this.model.get("created_at"))},d.prototype.toggle=function(){return this.$el.toggleClass("collapsed expaneded")},d}(Backbone.View)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};app.Views.Issue=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["app/scripts/templates/issue.ejs"],d}(app.Views.Comment)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};app.Views.PullRequest=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["app/scripts/templates/pull_request.ejs"],d}(app.Views.Comment)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};app.Views.Commit=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["app/scripts/templates/commit.ejs"],d}(app.Views.Comment)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};app.Views.Repositories=function(c){function e(){return this.initialize=b(this.initialize,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.el="#repositories",e.prototype.template=JST["app/scripts/templates/repository.ejs"],e.prototype.initialize=function(){return this.collection.fetch(),this.listenTo(this.collection,"add",this.add),this.listenTo(this.collection,"reset",this.addAll)},e.prototype.add=function(a){return this.$el.append(this.template(a.toJSON()))},e.prototype.addAll=function(){return this.collection.each(this.add,this)},e}(Backbone.View)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};app.Views.Shortcuts=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.el=document.body,d.prototype.template=JST["app/scripts/templates/shortcuts.ejs"],d.prototype.shortcuts={"Next Notification":{keys:["j","down"],action:"next"},"Previous Notification":{keys:["k","up"],action:"prev"},"Go to All notifications":{key:"g a",action:function(){return Backbone.history.navigate("all",{trigger:!0})}},"Go to Participating notifications":{key:"g p",action:function(){return Backbone.history.navigate("participating",{trigger:!0})}},"Go to Starred notifications":{key:"g s",action:function(){return Backbone.history.navigate("starred",{trigger:!0})}},"Open help for keyboard shortcuts":{key:"?",action:"help"}},d.prototype.keyboardEvents={"ctrl+`":"toggleDevelopmentMode"},d.prototype.initialize=function(){var a,b,c,d,e,f,g;f=this.shortcuts;for(a in f)for(c=f[a],c.keys||(c.keys=[c.key]),g=c.keys,d=0,e=g.length;e>d;d++)b=g[d],this.keyboardEvents[b]=c.action;return this.render()},d.prototype.next=function(a){return a.preventDefault(),this.select(this.collection.next()||this.collection.first())},d.prototype.prev=function(a){return a.preventDefault(),this.select(this.collection.prev()||this.collection.last())},d.prototype.select=function(a){return Backbone.history.navigate("#n/"+a.id,{trigger:!0})},d.prototype.render=function(){return this.$("#shortcuts").html(this.template(this)),this},d.prototype.help=function(){return this.$("#shortcuts").toggle()},d.prototype.toggleDevelopmentMode=function(){return localStorage.dev?(localStorage.removeItem("dev"),console.log("Development mode disabled")):(localStorage.dev=!0,console.log("Development mode enabled"))},d}(Backbone.View)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};app.Views.Subscription=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["app/scripts/templates/subscription.ejs"],d.prototype.events={"click .mute":function(){return this.model.mute()},"click .unmute":function(){return this.model.unmute()}},d.prototype.initialize=function(){return this.model.fetch(),this.listenTo(this.model,"change",this.render),this.render()},d.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON()))},d}(Backbone.View)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};app.Routers.Notifications=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.routes={participating:"participating",starred:"starred",all:"all","r/:id":"repository","n/:id":"show"},d.prototype.initialize=function(a){return this.collection=a.notifications,this.repositories=a.repositories,this.on("route",this.selectItem),this.view=new app.Views.Notifications({collection:this.collection}),this.view.render()},d.prototype.participating=function(){return this.view.load({data:{participating:!0}})},d.prototype.starred=function(){return this.collection.reset(this.collection.starred.toJSON())},d.prototype.all=function(){return this.view.load()},d.prototype.repository=function(a){var b;return(b=this.repositories.get(a))?this.view.load({url:b.notifications_url()}):void 0},d.prototype.show=function(a){var b;return(b=this.collection.get(a))?new app.Views.NotificationDetailsView({model:b}):void 0},d.prototype.selectItem=function(){var a;return(a=$("#lists").find("a[href='"+window.location.hash+"']")).length?($("#lists").find(".selected").removeClass("selected"),a.addClass("selected")):void 0},d}(Backbone.Router)}.call(this),function(){var a;a=function(a){var b,c,d,e,f;for(null==a&&(a=document),f=$(a).find(".js-relative-time[datetime]"),d=0,e=f.length;e>d;d++)c=f[d],(b=moment($(c).attr("datetime"),"YYYY-MM-DDTHH:mm:ssZ"))&&(c.textContent=b.fromNow())},app.on("render",function(b){return a(b.el)}),setInterval(a,6e4)}.call(this);